<div *ngIf="caseStudy" class="case-study-detail">
  <!-- Hero Section -->
  <section class="case-study-hero gradient-bg">
    <div class="container">
      <div class="row align-items-center min-vh-100">
        <div class="col-lg-8">
          <div class="hero-content text-white animate-fade-in">
            <div class="breadcrumb-nav mb-3">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="#" class="text-white-50">Solutions</a></li>
                  <li class="breadcrumb-item"><a href="#" class="text-white-50">Case Studies</a></li>
                  <li class="breadcrumb-item active text-white" aria-current="page">{{ caseStudy.client.name }}</li>
                </ol>
              </nav>
            </div>
            <div class="industry-badge mb-3">
              <span class="badge bg-warning">{{ caseStudy.industry }}</span>
            </div>
            <h1 class="display-4 fw-bold mb-3">{{ caseStudy.title }}</h1>
            <p class="lead mb-4 opacity-90">{{ caseStudy.subtitle }}</p>
            <div class="client-info-brief">
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="info-item">
                    <i class="fas fa-building text-warning me-2"></i>
                    <span>{{ caseStudy.client.name }}</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="info-item">
                    <i class="fas fa-map-marker-alt text-warning me-2"></i>
                    <span>{{ caseStudy.client.location }}</span>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="info-item">
                    <i class="fas fa-users text-warning me-2"></i>
                    <span>{{ caseStudy.client.employees }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="hero-stats">
            <div class="stat-card p-4 rounded-3" 
                 style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);">
              <h3 class="text-warning fw-bold">{{ caseStudy.results.roi.roiPercentage }}</h3>
              <p class="text-white mb-0">Return on Investment</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Client Overview -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <h2 class="display-6 fw-bold text-gradient mb-4">About {{ caseStudy.client.name }}</h2>
          <p class="lead text-muted mb-4">{{ caseStudy.client.description }}</p>
          <div class="client-details row g-4">
            <div class="col-md-6">
              <div class="detail-card p-3 bg-white rounded shadow-sm">
                <h6 class="fw-bold mb-2">
                  <i class="fas fa-map-marker-alt text-primary me-2"></i>Location
                </h6>
                <p class="mb-0">{{ caseStudy.client.location }}</p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="detail-card p-3 bg-white rounded shadow-sm">
                <h6 class="fw-bold mb-2">
                  <i class="fas fa-building text-primary me-2"></i>Size
                </h6>
                <p class="mb-0">{{ caseStudy.client.size }}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="technologies-used">
            <h5 class="fw-bold mb-3">Technologies Used</h5>
            <div class="tech-tags">
              <span *ngFor="let tech of caseStudy.technologies" 
                    class="badge bg-primary me-1 mb-2">{{ tech }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Challenge Section -->
  <section class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="display-5 fw-bold text-gradient">The Challenge</h2>
          <p class="lead text-muted">{{ caseStudy.challenge.title }}</p>
        </div>
      </div>
      
      <div class="row align-items-center">
        <div class="col-lg-6">
          <div class="challenge-content">
            <p class="text-muted mb-4">{{ caseStudy.challenge.description }}</p>
            <div class="impact-statement p-4 bg-danger bg-opacity-10 rounded-3 border-start border-danger border-4">
              <h6 class="fw-bold text-danger mb-2">Business Impact:</h6>
              <p class="text-muted mb-0">{{ caseStudy.challenge.impact }}</p>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="pain-points">
            <h5 class="fw-bold mb-3">Key Pain Points:</h5>
            <ul class="list-unstyled">
              <li *ngFor="let painPoint of caseStudy.challenge.painPoints" class="mb-3">
                <div class="pain-point-item p-3 bg-light rounded">
                  <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                  {{ painPoint }}
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Process Section -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="display-5 fw-bold text-gradient">Our Process</h2>
          <p class="lead text-muted">{{ caseStudy.process.title }}</p>
        </div>
      </div>
      
      <div class="row mb-4">
        <div class="col-12">
          <p class="text-muted">{{ caseStudy.process.description }}</p>
        </div>
      </div>
      
      <div class="process-timeline">
        <div *ngFor="let phase of caseStudy.process.phases; let i = index" 
             class="timeline-item" [class.timeline-item-right]="i % 2 === 1">
          <div class="timeline-content">
            <div class="phase-header mb-3">
              <div class="d-flex align-items-center justify-content-between">
                <h5 class="fw-bold mb-0">{{ phase.title }}</h5>
                <span class="badge bg-primary">Phase {{ phase.phase }}</span>
              </div>
              <small class="text-muted">
                <i class="fas fa-clock me-1"></i>Duration: {{ phase.duration }}
              </small>
            </div>
            
            <div class="phase-activities mb-3">
              <h6 class="fw-bold mb-2">Key Activities:</h6>
              <ul class="list-unstyled">
                <li *ngFor="let activity of phase.activities" class="mb-1">
                  <i class="fas fa-check text-success me-2"></i>{{ activity }}
                </li>
              </ul>
            </div>
            
            <div class="phase-deliverables">
              <h6 class="fw-bold mb-2">Deliverables:</h6>
              <div class="deliverable-tags">
                <span *ngFor="let deliverable of phase.deliverables" 
                      class="badge bg-light text-dark me-1 mb-1">{{ deliverable }}</span>
              </div>
            </div>
          </div>
          <div class="step-badge">{{ phase.phase }}</div>
        </div>
      </div>
      
      <div class="row mt-4">
        <div class="col-12">
          <div class="methodology-note p-4 bg-primary bg-opacity-10 rounded-3">
            <h6 class="fw-bold text-primary mb-2">
              <i class="fas fa-lightbulb me-2"></i>Methodology
            </h6>
            <p class="text-muted mb-0">{{ caseStudy.process.methodology }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Results Section -->
  <section class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="display-5 fw-bold text-gradient">Results & Impact</h2>
          <p class="lead text-muted">{{ caseStudy.results.title }}</p>
        </div>
      </div>
      
      <div class="row mb-5">
        <div class="col-12">
          <p class="text-muted text-center">{{ caseStudy.results.description }}</p>
        </div>
      </div>
      
      <!-- ROI Summary -->
      <div class="row mb-5">
        <div class="col-12">
          <div class="roi-summary p-4 bg-success bg-opacity-10 rounded-3 border border-success">
            <div class="row text-center">
              <div class="col-md-3">
                <div class="roi-metric">
                  <h3 class="fw-bold text-success mb-1">{{ caseStudy.results.roi.roiPercentage }}</h3>
                  <small class="text-muted">Return on Investment</small>
                </div>
              </div>
              <div class="col-md-3">
                <div class="roi-metric">
                  <h3 class="fw-bold text-success mb-1">{{ caseStudy.results.roi.paybackPeriod }}</h3>
                  <small class="text-muted">Payback Period</small>
                </div>
              </div>
              <div class="col-md-3">
                <div class="roi-metric">
                  <h3 class="fw-bold text-success mb-1">{{ caseStudy.results.roi.investment }}</h3>
                  <small class="text-muted">Total Investment</small>
                </div>
              </div>
              <div class="col-md-3">
                <div class="roi-metric">
                  <h3 class="fw-bold text-success mb-1">{{ caseStudy.results.roi.savings }}</h3>
                  <small class="text-muted">Total Savings</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Detailed Metrics -->
      <div class="row g-4">
        <div *ngFor="let category of caseStudy.results.metrics" class="col-lg-4">
          <div class="metrics-card h-100 shadow-custom">
            <div class="card-body p-4">
              <h5 class="fw-bold mb-4 text-center">{{ category.category }}</h5>
              <div class="metrics-list">
                <div *ngFor="let improvement of category.improvements" class="metric-item mb-3">
                  <div class="d-flex align-items-center justify-content-between">
                    <div class="metric-info">
                      <i [class]="improvement.icon + ' text-success me-2'"></i>
                      <span class="metric-name">{{ improvement.metric }}</span>
                    </div>
                    <span class="badge bg-success">{{ improvement.improvement }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Visuals Section -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="display-5 fw-bold text-gradient">Visual Impact</h2>
          <p class="lead text-muted">See the transformation in action</p>
        </div>
      </div>
      
      <!-- Before/After Comparison -->
      <div class="row g-4 mb-5">
        <div *ngFor="let visual of caseStudy.visuals.beforeAfter" class="col-lg-6">
          <div class="visual-card shadow-custom">
            <div class="visual-image">
              <img [src]="visual.image" [alt]="visual.title" class="img-fluid">
            </div>
            <div class="card-body p-4 text-center">
              <h5 class="fw-bold mb-2">{{ visual.title }}</h5>
              <p class="text-muted">{{ visual.description }}</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Architecture Diagram -->
      <div class="row mb-5">
        <div class="col-12">
          <div class="architecture-visual shadow-custom">
            <div class="visual-image">
              <img [src]="caseStudy.visuals.architecture.image" 
                   [alt]="caseStudy.visuals.architecture.title" class="img-fluid">
            </div>
            <div class="card-body p-4 text-center">
              <h5 class="fw-bold mb-2">{{ caseStudy.visuals.architecture.title }}</h5>
              <p class="text-muted">{{ caseStudy.visuals.architecture.description }}</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Dashboard Screenshot -->
      <div class="row">
        <div class="col-12">
          <div class="dashboard-visual shadow-custom">
            <div class="visual-image">
              <img [src]="caseStudy.visuals.dashboard.image" 
                   [alt]="caseStudy.visuals.dashboard.title" class="img-fluid">
            </div>
            <div class="card-body p-4 text-center">
              <h5 class="fw-bold mb-2">{{ caseStudy.visuals.dashboard.title }}</h5>
              <p class="text-muted">{{ caseStudy.visuals.dashboard.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonial Section -->
  <section class="py-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="testimonial-featured shadow-custom">
            <div class="card-body p-5">
              <div class="row align-items-center">
                <div class="col-lg-8">
                  <div class="testimonial-content">
                    <i class="fas fa-quote-left fa-3x text-primary mb-4"></i>
                    <blockquote class="blockquote">
                      <p class="lead fst-italic">{{ caseStudy.testimonial.quote }}</p>
                    </blockquote>
                    <div class="testimonial-author mt-4">
                      <h6 class="fw-bold mb-0">{{ caseStudy.testimonial.author }}</h6>
                      <small class="text-muted">{{ caseStudy.testimonial.title }}</small>
                      <br>
                      <small class="text-primary">{{ caseStudy.testimonial.company }}</small>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 text-center">
                  <img [src]="caseStudy.testimonial.image" [alt]="caseStudy.testimonial.author" 
                       class="rounded-circle mb-3" width="120" height="120">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Additional Testimonials -->
      <div class="row g-4 mt-4" *ngIf="caseStudy.testimonial.additionalQuotes">
        <div *ngFor="let quote of caseStudy.testimonial.additionalQuotes" class="col-lg-6">
          <div class="additional-testimonial p-4 bg-light rounded">
            <p class="fst-italic mb-3">"{{ quote.quote }}"</p>
            <div class="quote-author">
              <h6 class="fw-bold mb-0">{{ quote.author }}</h6>
              <small class="text-muted">{{ quote.title }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Case Studies -->
  <section class="py-5 bg-light" *ngIf="getRelatedCaseStudies().length > 0">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="display-5 fw-bold text-gradient">Related Success Stories</h2>
          <p class="lead text-muted">Explore more of our transformational projects</p>
        </div>
      </div>
      
      <div class="row g-4">
        <div *ngFor="let relatedCase of getRelatedCaseStudies()" class="col-lg-6">
          <div class="related-case-card shadow-custom hover-scale">
            <div class="card-body p-4">
              <div class="industry-badge mb-2">
                <span class="badge bg-primary">{{ relatedCase.industry }}</span>
              </div>
              <h5 class="fw-bold mb-3">{{ relatedCase.title }}</h5>
              <p class="text-muted mb-3">{{ relatedCase.subtitle }}</p>
              <div class="case-tags mb-3">
                <span *ngFor="let tag of relatedCase.tags.slice(0, 3)" 
                      class="badge bg-light text-dark me-1 mb-1">{{ tag }}</span>
              </div>
              <button class="btn btn-outline-primary" [routerLink]="'/case-studies/' + relatedCase.id">
                <i class="fas fa-eye me-2"></i>View Case Study
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="gradient-bg py-5">
    <div class="container">
      <div class="row justify-content-center text-center">
        <div class="col-lg-8">
          <div class="cta-content text-white">
            <h2 class="display-5 fw-bold mb-4">Ready for Your Success Story?</h2>
            <p class="lead mb-4 opacity-90">
              Let's discuss how we can deliver similar transformational results for your organization. 
              Our proven methodology and industry expertise ensure successful outcomes.
            </p>
            <div class="cta-buttons">
              <button class="btn btn-light btn-lg me-3 mb-2">
                <i class="fas fa-calendar me-2"></i>Schedule Consultation
              </button>
              <button class="btn btn-outline-light btn-lg mb-2">
                <i class="fas fa-download me-2"></i>Download Case Study PDF
              </button>
            </div>
            <div class="mt-4">
              <small class="opacity-75">
                <i class="fas fa-shield-alt me-1"></i>
                Free consultation • Proven methodology • Guaranteed results
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Case Study Not Found -->
<div *ngIf="!caseStudy" class="container py-5">
  <div class="row justify-content-center text-center">
    <div class="col-lg-6">
      <i class="fas fa-search fa-4x text-muted mb-4"></i>
      <h2 class="fw-bold mb-3">Case Study Not Found</h2>
      <p class="text-muted mb-4">The case study you're looking for doesn't exist or has been moved.</p>
      <button class="btn btn-primary" routerLink="/case-studies">
        <i class="fas fa-arrow-left me-2"></i>Back to Case Studies
      </button>
    </div>
  </div>
</div>
